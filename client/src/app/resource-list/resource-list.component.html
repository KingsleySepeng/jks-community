<!-- resource-list.component.html -->
<div class="container my-5">
  <h2 class="mb-4">Available Resources</h2>

  <div *ngFor="let r of filteredResources$ | async" class="card my-3 p-3">
    <h5>{{ r.title }}</h5>
    <p>{{ r.description }}</p>

    <ng-container [ngSwitch]="r.contentType">
      <!-- Inline image -->
      <img *ngSwitchCase="'image/png'"
           [src]="getSafeUrl(r)"
           class="img-fluid"/>

      <!-- Inline PDF viewer -->
      <iframe *ngSwitchCase="'application/pdf'"
              [src]="getSafeUrl(r)"
              width="100%" height="600px"></iframe>

      <!-- Inline video player -->
      <video *ngSwitchCase="'video/mp4'"
             width="100%" height="auto"
             controls
             [src]="getSafeUrl(r)">
        Your browser does not support video.
      </video>

      <!-- Fallback / unsupported -->
      <div *ngSwitchDefault>
        <em>Unsupported content type: {{ r.contentType }}</em>
      </div>
    </ng-container>

    <div class="mt-3">
      <!-- Download link -->
      <a [href]="getSafeUrl(r)"
         [attr.download]="r.title"
         class="btn btn-sm btn-outline-primary me-2">
        Download
      </a>
      <button class="btn btn-sm btn-danger"
              (click)="deleteResource(r.id)">
        Remove
      </button>
    </div>
  </div>

  <ng-template #noResources>
    <div class="alert alert-info">No resources found.</div>
  </ng-template>
</div>
